<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Predictor - Sistema ML YouTube</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            color: #666;
            font-size: 1.1em;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .result-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .result-box.show {
            display: block;
        }

        .vph-display {
            font-size: 3em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
        }

        .vph-display.exitoso { color: #10b981; }
        .vph-display.promedio { color: #f59e0b; }
        .vph-display.fracaso { color: #ef4444; }

        .classification {
            text-align: center;
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .recommendations {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .recommendations li {
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .recommendations li:last-child {
            border-bottom: none;
        }

        .antipatron-item {
            background: #fff3cd;
            padding: 12px;
            border-left: 4px solid #ffc107;
            margin-bottom: 12px;
            border-radius: 5px;
        }

        .antipatron-item strong {
            color: #856404;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .command-box {
            background: #2d2d2d;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ü§ñ Dashboard Predictor ML</h1>
            <p class="subtitle">Sistema de Predicci√≥n de VPH - Eval√∫a videos ANTES de publicar</p>
        </header>

        <div class="grid">
            <!-- Predictor Form -->
            <div class="card" style="grid-column: span 2;">
                <h2>üìä Predictor de VPH</h2>

                <div class="info-box">
                    <strong>üí° C√≥mo usar:</strong> El predictor usa un modelo ML entrenado con tus videos hist√≥ricos para estimar el VPH (Views Por Hora) ANTES de publicar.
                </div>

                <form id="predictForm">
                    <div class="form-group">
                        <label for="titulo">T√≠tulo del video:</label>
                        <textarea id="titulo" required placeholder="Ejemplo: SECRETO oculto de ChatGPT 2025 que NADIE conoce"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="duracion">Duraci√≥n (segundos):</label>
                        <input type="number" id="duracion" required placeholder="300" min="10" max="3600">
                        <small style="color: #666;">Shorts: <60s | Longs √≥ptimos: 180-600s (3-10 min)</small>
                    </div>

                    <div class="form-group">
                        <label for="dia">D√≠a de publicaci√≥n:</label>
                        <select id="dia" required>
                            <option value="">Seleccionar...</option>
                            <option value="lunes">Lunes</option>
                            <option value="martes">Martes</option>
                            <option value="miercoles">Mi√©rcoles</option>
                            <option value="jueves">Jueves</option>
                            <option value="viernes">Viernes</option>
                            <option value="sabado">S√°bado</option>
                            <option value="domingo">Domingo</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="hora">Hora de publicaci√≥n:</label>
                        <select id="hora" required>
                            <option value="">Seleccionar...</option>
                            <option value="0">00:00 - Madrugada</option>
                            <option value="6">06:00 - Ma√±ana</option>
                            <option value="9">09:00 - Media ma√±ana</option>
                            <option value="12">12:00 - Mediod√≠a</option>
                            <option value="14">14:00 - Tarde temprana</option>
                            <option value="17">17:00 - Prime time (RECOMENDADO)</option>
                            <option value="18">18:00 - Prime time (RECOMENDADO)</option>
                            <option value="19">19:00 - Prime time (RECOMENDADO)</option>
                            <option value="20">20:00 - Prime time (RECOMENDADO)</option>
                            <option value="21">21:00 - Noche</option>
                            <option value="23">23:00 - Noche tarde</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="nicho_score">Score de nicho (0-100):</label>
                        <input type="number" id="nicho_score" value="70" min="0" max="100">
                        <small style="color: #666;">Calculado autom√°ticamente con config_nicho.json | Recomendado: ‚â•60</small>
                    </div>

                    <button type="submit" class="btn">üöÄ Predecir VPH</button>
                </form>

                <div id="resultBox" class="result-box">
                    <h3 style="text-align: center; margin-bottom: 20px;">Resultado de Predicci√≥n</h3>
                    <div id="vphDisplay" class="vph-display">0 VPH</div>
                    <div id="classification" class="classification"></div>

                    <div class="recommendations">
                        <h4 style="margin-bottom: 15px;">üí° Recomendaciones:</h4>
                        <ul id="recommendationsList" style="list-style: none; padding-left: 0;">
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Uso por l√≠nea de comandos -->
            <div class="card">
                <h2>‚å®Ô∏è Uso por L√≠nea de Comandos</h2>

                <p style="margin-bottom: 15px;">Tambi√©n puedes usar el predictor desde la terminal:</p>

                <div class="command-box">
                    cd GITHUB CRON\scripts<br>
                    python predict_video.py
                </div>

                <p style="margin: 15px 0;">O con argumentos:</p>

                <div class="command-box" style="font-size: 0.85em;">
                    python predict_video.py \<br>
                    &nbsp;&nbsp;--titulo "SECRETO de ChatGPT" \<br>
                    &nbsp;&nbsp;--duracion 300 \<br>
                    &nbsp;&nbsp;--dia viernes \<br>
                    &nbsp;&nbsp;--hora 18 \<br>
                    &nbsp;&nbsp;--nicho-score 75
                </div>

                <div class="success-box" style="margin-top: 15px;">
                    <strong>‚úÖ Ventajas:</strong>
                    <ul style="margin-top: 8px; margin-left: 20px;">
                        <li>100% local (no requiere internet)</li>
                        <li>R√°pido (predicci√≥n en < 1 segundo)</li>
                        <li>Usa modelo entrenado autom√°ticamente</li>
                    </ul>
                </div>
            </div>

            <!-- Anti-patrones recientes -->
            <div class="card">
                <h2>‚ö†Ô∏è Anti-Patrones Detectados</h2>

                <div class="warning-box">
                    <strong>üìä Actualizaci√≥n:</strong> Se actualizan cada domingo con an√°lisis semanal
                </div>

                <div id="antipatronesContainer">
                    <div class="antipatron-item">
                        <strong>Publicar lunes/martes en la ma√±ana</strong><br>
                        <small>Bajo engagement inicio de semana + audiencia inactiva ma√±anas</small>
                    </div>

                    <div class="antipatron-item">
                        <strong>T√≠tulo sin palabras gancho</strong><br>
                        <small>T√≠tulos gen√©ricos generan menos curiosidad</small>
                    </div>

                    <div class="antipatron-item">
                        <strong>T√≠tulo muy corto (<60 caracteres)</strong><br>
                        <small>T√≠tulos cortos no generan suficiente contexto/curiosidad</small>
                    </div>

                    <div class="antipatron-item">
                        <strong>Fuera del nicho principal</strong><br>
                        <small>Score de nicho bajo, audiencia no interesada</small>
                    </div>
                </div>

                <p style="margin-top: 15px; font-size: 0.9em; color: #666;">
                    üìå Estos patrones se detectan autom√°ticamente en videos que fracasaron (VPH < 60)
                </p>
            </div>

            <!-- Estad√≠sticas del sistema -->
            <div class="card" style="grid-column: span 2;">
                <h2>üìà Estado del Sistema ML</h2>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">65-80%</div>
                        <div class="stat-label">Precisi√≥n objetivo</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">12</div>
                        <div class="stat-label">Features limpias</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">3</div>
                        <div class="stat-label">Modelos ensemble</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">6 meses</div>
                        <div class="stat-label">Ventana temporal</div>
                    </div>
                </div>

                <div class="info-box" style="margin-top: 20px;">
                    <strong>üîÑ Automatizaci√≥n:</strong>
                    <ul style="margin-top: 8px; margin-left: 20px;">
                        <li><strong>Semanal:</strong> An√°lisis de anti-patrones (domingos 3AM)</li>
                        <li><strong>Mensual:</strong> Re-entrenamiento completo del modelo (d√≠a 1 de cada mes)</li>
                        <li><strong>Pre-purga:</strong> Snapshot de datos antes de eliminar videos viejos</li>
                    </ul>
                </div>

                <div class="success-box" style="margin-top: 15px;">
                    <strong>‚úÖ Sistema 100% Autom√°tico:</strong> Todo funciona en GitHub Actions sin intervenci√≥n manual
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="card" style="text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
            <p style="margin-bottom: 10px;"><strong>ü§ñ Sistema ML Predictor de YouTube</strong></p>
            <p style="opacity: 0.9;">Creado con Claude Code | √öltima actualizaci√≥n: 2025-11-10</p>
        </div>
    </div>

    <script>
        // Manejo del formulario de predicci√≥n
        document.getElementById('predictForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            // Obtener valores
            const titulo = document.getElementById('titulo').value;
            const duracion = parseInt(document.getElementById('duracion').value);
            const dia = document.getElementById('dia').value;
            const hora = parseInt(document.getElementById('hora').value);
            const nicho_score = parseInt(document.getElementById('nicho_score').value);

            // Simular predicci√≥n (en la versi√≥n real, llamar√≠as al backend)
            // Para esta versi√≥n standalone, mostramos c√≥mo usar el script Python

            const vph = calcularVPHSimulado(titulo, duracion, dia, hora, nicho_score);
            mostrarResultado(vph, titulo, duracion, dia, hora, nicho_score);
        });

        function calcularVPHSimulado(titulo, duracion, dia, hora, nicho_score) {
            // Esta es una simulaci√≥n simplificada
            // En producci√≥n, se llamar√≠a al script Python predict_video.py

            let score = nicho_score;

            // Bonificaciones por timing
            if (dia === 'viernes' || dia === 'sabado' || dia === 'domingo') score += 10;
            if (hora >= 17 && hora <= 20) score += 15;

            // Bonificaciones por t√≠tulo
            const ganchos = ['SECRETO', 'TRUCO', 'OCULTO', 'NADIE', 'INCRE√çBLE', 'SORPRENDENTE'];
            if (ganchos.some(g => titulo.toUpperCase().includes(g))) score += 15;
            if (titulo.includes('2025') || titulo.includes('2024')) score += 5;

            // Bonificaciones por duraci√≥n
            if (duracion < 90 && duracion >= 20 && duracion <= 60) score += 10;
            if (duracion >= 180 && duracion <= 600) score += 10;

            // Convertir score a VPH aproximado
            return Math.max(10, score * 1.2 + Math.random() * 20);
        }

        function mostrarResultado(vph, titulo, duracion, dia, hora, nicho_score) {
            const resultBox = document.getElementById('resultBox');
            const vphDisplay = document.getElementById('vphDisplay');
            const classification = document.getElementById('classification');
            const recommendationsList = document.getElementById('recommendationsList');

            // Determinar clasificaci√≥n
            let clase, emoji, mensaje;
            if (vph >= 120) {
                clase = 'exitoso';
                emoji = 'üöÄ';
                mensaje = '¬°Excelente! Este video tiene alto potencial';
            } else if (vph >= 60) {
                clase = 'promedio';
                emoji = 'üü°';
                mensaje = 'Video aceptable, pero puede mejorar';
            } else {
                clase = 'fracaso';
                emoji = '‚ùå';
                mensaje = 'ADVERTENCIA: Alto riesgo de fracaso';
            }

            // Actualizar display
            vphDisplay.textContent = `${vph.toFixed(1)} VPH`;
            vphDisplay.className = `vph-display ${clase}`;
            classification.innerHTML = `${emoji} ${clase.toUpperCase()}<br><small style="font-size: 0.7em; font-weight: normal;">${mensaje}</small>`;

            // Generar recomendaciones
            const recomendaciones = [];

            const ganchos = ['SECRETO', 'TRUCO', 'OCULTO', 'NADIE', 'INCRE√çBLE', 'SORPRENDENTE'];
            if (!ganchos.some(g => titulo.toUpperCase().includes(g))) {
                recomendaciones.push('‚ö†Ô∏è Agregar palabra gancho (SECRETO, TRUCO, OCULTO, etc.)');
            }

            if (!titulo.includes('2025') && !titulo.includes('2024')) {
                recomendaciones.push('‚ö†Ô∏è Incluir a√±o actual (2025) en t√≠tulo');
            }

            if (titulo.length < 60) {
                recomendaciones.push('‚ö†Ô∏è T√≠tulo muy corto. Usar 80-100 caracteres');
            }

            if (dia !== 'viernes' && dia !== 'sabado' && dia !== 'domingo') {
                recomendaciones.push('‚ö†Ô∏è Mejor d√≠a: Viernes o fin de semana');
            }

            if (hora < 17 || hora > 20) {
                recomendaciones.push('‚ö†Ô∏è Mejor hora: 5PM-9PM (prime time)');
            }

            if (duracion < 90 && (duracion < 20 || duracion > 60)) {
                recomendaciones.push('‚ö†Ô∏è Short √≥ptimo: 20-60 segundos');
            }

            if (duracion >= 90 && (duracion < 180 || duracion > 600)) {
                recomendaciones.push('‚ö†Ô∏è Long √≥ptimo: 3-10 minutos');
            }

            if (nicho_score < 60) {
                recomendaciones.push('‚ö†Ô∏è Video fuera del nicho principal (score < 60)');
            }

            if (recomendaciones.length === 0) {
                recomendaciones.push('‚úÖ Video cumple con todas las mejores pr√°cticas');
            }

            // Renderizar recomendaciones
            recommendationsList.innerHTML = '';
            recomendaciones.forEach(rec => {
                const li = document.createElement('li');
                li.textContent = rec;
                recommendationsList.appendChild(li);
            });

            // Mostrar resultados
            resultBox.classList.add('show');
            resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Advertencia sobre uso real
        console.log('%c‚ö†Ô∏è IMPORTANTE: Este dashboard usa predicciones simuladas', 'background: #ffc107; color: #000; font-size: 16px; padding: 10px;');
        console.log('%cPara predicciones REALES del modelo entrenado, usa:', 'font-size: 14px;');
        console.log('python scripts/predict_video.py');
    </script>
</body>
</html>
